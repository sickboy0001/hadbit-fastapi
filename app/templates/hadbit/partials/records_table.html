{% if not oob and not update %}
<div id="records-list" class="grid grid-cols-1 md:grid-cols-3 gap-4 items-start" {% if swap_all %}hx-swap-oob="true"{% endif %}>
{% endif %}

{% if not oob and not update %}
  {% set ns = namespace(current_date=None) %}
  {% for log in logs %}
    {% set log_date = log.done_at.strftime('%Y-%m-%d') %}
    {% if ns.current_date != log_date %}
      {% if ns.current_date is not none %}
        </div></div></div>
      {% endif %}
      <div class="card bg-base-100 shadow-sm border border-base-200">
        <div class="card-body p-4">
          <h3 class="card-title text-lg border-b border-base-200 mb-2 pb-2">{{ log_date }}</h3>
          <div class="flex flex-col">
      {% set ns.current_date = log_date %}
    {% endif %}
    
    <div id="log-{{ log.log_id }}" class="record-row flex items-center gap-2 py-2 border-b border-base-100 last:border-none">
      <span class="text-sm text-gray-500">{{ log.done_at.strftime('%H:%M') }}</span>
      <span class="font-semibold">[{{ log.parent_short_name }}] {{ log.child_short_name }}</span>
      <div class="flex gap-2">
        <button class="btn btn-outline btn-info btn-sm" hx-get="/hadbit/records/{{ log.log_id }}/edit" hx-target="#modal-container" hx-swap="innerHTML">編集</button>
        <button class="btn btn-outline btn-error btn-sm" hx-delete="/api/logs/delete/{{ log.log_id }}" hx-target="closest .record-row" hx-swap="outerHTML">削除</button>
      </div>
    </div>

    {% if loop.last %}
      </div></div></div>
    {% endif %}
  {% endfor %}
{% else %}
  {% for log in logs %}
    <div id="log-{{ log.log_id }}" class="record-row flex items-center gap-2 py-2 border-b border-base-100 last:border-none"{% if update %}hx-swap-oob="outerHTML:#log-{{ log.log_id }}"{% endif %}>
      <span class="text-sm text-gray-500">{{ log.done_at.strftime('%H:%M') }}</span>
      <span class="font-semibold">[{{ log.parent_short_name }}] {{ log.child_short_name }}</span>
      <div class="flex gap-2">
        <button class="btn btn-outline btn-info btn-sm" hx-get="/hadbit/records/{{ log.log_id }}/edit" hx-target="#modal-container" hx-swap="innerHTML">編集</button>
        <button class="btn btn-outline btn-error btn-sm" hx-delete="/api/logs/delete/{{ log.log_id }}" hx-target="closest .record-row" hx-swap="outerHTML">削除</button>
      </div>
    </div>
  {% endfor %}
{% endif %}

{% if not oob and not update %}
</div>
{% endif %}
